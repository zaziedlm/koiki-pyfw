# DATABASE Configuration (PostgreSQL)
DATABASE_URL=postgresql+asyncpg://koiki_user:koiki_password@db:5432/koiki_todo_db

# PostgreSQL Configuration
POSTGRES_SERVER=db
POSTGRES_USER=koiki_user
POSTGRES_PASSWORD=koiki_password
POSTGRES_DB=koiki_todo_db
POSTGRES_PORT=5432

# API Configuration
APP_ENV=development
DEBUG=True
SECRET_KEY=development_secret_key
API_V1_STR=/api/v1

# Redis Configuration - Disabled in simple version
REDIS_ENABLED=false
# REDIS_HOST=redis
# REDIS_PORT=6379

# JWT Authentication Configuration
JWT_SECRET=jwt_secret_development_only
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================
# SSO (OIDC) Configuration
# Added for SSO integration
# =============================

# [Required] Your OIDC client ID issued by the provider
SSO_CLIENT_ID=

# [Required] Your OIDC client secret issued by the provider
SSO_CLIENT_SECRET=

# [Required] OIDC issuer URL (ex: https://tenant.example.com/)
SSO_ISSUER_URL=

# [Required] JWKS endpoint for signature verification
# Typically discovered from: {ISSUER_URL}/.well-known/openid-configuration
SSO_JWKS_URI=

# Auto-create local users at first SSO login (true/false)
SSO_AUTO_CREATE_USERS=true

# Default SSO provider identifier (keep as 'oidc' unless you manage multiple)
SSO_DEFAULT_PROVIDER=oidc

# JWKS cache TTL in seconds
SSO_TOKEN_CACHE_TTL=300

# Allowed email domains (comma-separated). Empty means allow all
# Example: example.com,corp.local
SSO_ALLOWED_DOMAINS=

# Require email to be verified by the provider (true/false)
SSO_REQUIRE_EMAIL_VERIFIED=true

# Optional: UserInfo endpoint (used when ID token lacks some claims)
SSO_USER_INFO_ENDPOINT=

# --- Security switches (enable all in production) ---
# Validate audience (aud) claim against SSO_CLIENT_ID
SSO_AUDIENCE_VALIDATION=true
# Validate issuer (iss) claim against SSO_ISSUER_URL
SSO_ISSUER_VALIDATION=true
# Validate JWT signature using JWKS
SSO_SIGNATURE_VALIDATION=true
# Validate expiry (exp), not-before (nbf), issued-at (iat)
SSO_EXPIRY_VALIDATION=true

# Clock skew tolerance in seconds for JWT time claims
SSO_CLOCK_SKEW_SECONDS=30

# Debug mode (verbose logging; do not enable in production)
SSO_DEBUG_MODE=false

# Skip SSL verification for JWKS/userinfo (development only)
SSO_SKIP_SSL_VERIFY=false

